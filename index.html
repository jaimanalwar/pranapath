<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healing Vibrations - 40 Chakra & Solfeggio Frequencies</title>
    <meta name="description" content="40 healing vibrations for chakra balancing and sound therapy">
    <meta name="theme-color" content="#6366f1">
    <link rel="manifest" href="manifest.json">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
        .app-container { min-height: 100vh; background: linear-gradient(135deg, #312e81 0%, #7c3aed 50%, #ec4899 100%); }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const { Play, Pause, Square, Clock, Zap, Heart, Settings, Home, List, Timer } = lucideReact;

        const HealingVibrationsApp = () => {
          const [audioContext, setAudioContext] = useState(null);
          const [currentTone, setCurrentTone] = useState(null);
          const [isPlaying, setIsPlaying] = useState(false);
          const [selectedFreq, setSelectedFreq] = useState(null);
          const [sessionActive, setSessionActive] = useState(false);
          const [sessionTime, setSessionTime] = useState(15);
          const [timeRemaining, setTimeRemaining] = useState(0);
          const [individualDuration, setIndividualDuration] = useState(5);
          const [currentView, setCurrentView] = useState('home');
          const [currentIndex, setCurrentIndex] = useState(0);
          
          const oscillatorRef = useRef(null);
          const gainNodeRef = useRef(null);
          const sessionIntervalRef = useRef(null);
          const frequencyTimeoutRef = useRef(null);
          const individualTimeoutRef = useRef(null);

          const frequencies = [
            // Core Solfeggio Frequencies
            { freq: 174, name: "UT - Foundation", category: "Solfeggio", color: "#8B0000", description: "Pain relief, security, grounding" },
            { freq: 285, name: "RE - Rapid Healing", category: "Solfeggio", color: "#8B0000", description: "Tissue regeneration, cellular healing" },
            { freq: 396, name: "UT - Liberation", category: "Solfeggio", color: "#8B0000", description: "Fear release, guilt liberation" },
            { freq: 417, name: "RE - Change", category: "Solfeggio", color: "#FF4500", description: "Trauma clearing, change facilitation" },
            { freq: 528, name: "MI - Transformation", category: "Solfeggio", color: "#FFD700", description: "DNA repair, love frequency" },
            { freq: 639, name: "FA - Connection", category: "Solfeggio", color: "#32CD32", description: "Heart healing, relationships" },
            { freq: 741, name: "SOL - Expression", category: "Solfeggio", color: "#4169E1", description: "Self-expression, solutions" },
            { freq: 852, name: "LA - Intuition", category: "Solfeggio", color: "#9400D3", description: "Third eye awakening" },
            { freq: 963, name: "SI - Unity", category: "Solfeggio", color: "#DDA0DD", description: "Crown connection, oneness" },
            
            // Root Chakra (Muladhara) - Red
            { freq: 194.18, name: "Root Fundamental", category: "Root Chakra", color: "#C41E3A", description: "Grounding, survival, stability" },
            { freq: 256, name: "Root C Note", category: "Root Chakra", color: "#C41E3A", description: "Physical foundation" },
            { freq: 228, name: "Root Harmonic", category: "Root Chakra", color: "#C41E3A", description: "Earth connection" },
            { freq: 384, name: "Root Overtone", category: "Root Chakra", color: "#C41E3A", description: "Material security" },
            
            // Sacral Chakra (Svadhisthana) - Orange
            { freq: 210, name: "Sacral Fundamental", category: "Sacral Chakra", color: "#FF8C00", description: "Creativity, sexuality, emotion" },
            { freq: 288, name: "Sacral D Note", category: "Sacral Chakra", color: "#FF8C00", description: "Creative flow" },
            { freq: 303, name: "Sacral Harmonic", category: "Sacral Chakra", color: "#FF8C00", description: "Emotional balance" },
            { freq: 432, name: "Sacral Resonance", category: "Sacral Chakra", color: "#FF8C00", description: "Natural frequency" },
            
            // Solar Plexus Chakra (Manipura) - Yellow
            { freq: 126, name: "Solar Fundamental", category: "Solar Plexus", color: "#FFD700", description: "Personal power, confidence" },
            { freq: 320, name: "Solar E Note", category: "Solar Plexus", color: "#FFD700", description: "Self-esteem" },
            { freq: 341.3, name: "Solar Harmonic", category: "Solar Plexus", color: "#FFD700", description: "Inner strength" },
            { freq: 480, name: "Solar Overtone", category: "Solar Plexus", color: "#FFD700", description: "Will power" },
            
            // Heart Chakra (Anahata) - Green
            { freq: 341.3, name: "Heart Fundamental", category: "Heart Chakra", color: "#32CD32", description: "Love, compassion, healing" },
            { freq: 360, name: "Heart F Note", category: "Heart Chakra", color: "#32CD32", description: "Emotional healing" },
            { freq: 512, name: "Heart Harmonic", category: "Heart Chakra", color: "#32CD32", description: "Unconditional love" },
            { freq: 682.7, name: "Heart Resonance", category: "Heart Chakra", color: "#32CD32", description: "Heart opening" },
            
            // Throat Chakra (Vishuddha) - Blue
            { freq: 192, name: "Throat Fundamental", category: "Throat Chakra", color: "#4169E1", description: "Communication, truth" },
            { freq: 384, name: "Throat G Note", category: "Throat Chakra", color: "#4169E1", description: "Self-expression" },
            { freq: 426.7, name: "Throat Harmonic", category: "Throat Chakra", color: "#4169E1", description: "Clear communication" },
            { freq: 768, name: "Throat Overtone", category: "Throat Chakra", color: "#4169E1", description: "Truth speaking" },
            
            // Third Eye Chakra (Ajna) - Indigo
            { freq: 221.23, name: "Third Eye Fundamental", category: "Third Eye", color: "#4B0082", description: "Intuition, insight, wisdom" },
            { freq: 448, name: "Third Eye A Note", category: "Third Eye", color: "#4B0082", description: "Inner vision" },
            { freq: 473.9, name: "Third Eye Harmonic", category: "Third Eye", color: "#4B0082", description: "Psychic awareness" },
            { freq: 896, name: "Third Eye Resonance", category: "Third Eye", color: "#4B0082", description: "Spiritual sight" },
            
            // Crown Chakra (Sahasrara) - Violet/White
            { freq: 172.06, name: "Crown Fundamental", category: "Crown Chakra", color: "#9400D3", description: "Spiritual connection, enlightenment" },
            { freq: 480, name: "Crown B Note", category: "Crown Chakra", color: "#9400D3", description: "Divine connection" },
            { freq: 952.04, name: "Crown Harmonic", category: "Crown Chakra", color: "#9400D3", description: "Cosmic consciousness" },
            { freq: 1024, name: "Crown Resonance", category: "Crown Chakra", color: "#9400D3", description: "Unity consciousness" },
            
            // Additional Healing Frequencies
            { freq: 111, name: "Cell Regeneration", category: "Healing", color: "#20B2AA", description: "Cellular repair, beta endorphins" },
            { freq: 40, name: "Gamma Meditation", category: "Healing", color: "#20B2AA", description: "Higher consciousness" },
            { freq: 7.83, name: "Schumann Resonance", category: "Healing", color: "#20B2AA", description: "Earth frequency, grounding" },
            { freq: 10, name: "Alpha State", category: "Healing", color: "#20B2AA", description: "Relaxation, creativity" }
          ];

          useEffect(() => {
            const initAudio = async () => {
              try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                setAudioContext(ctx);
              } catch (error) {
                console.log('Audio context not supported');
              }
            };
            initAudio();
            
            return () => {
              if (audioContext) {
                audioContext.close();
              }
            };
          }, []);

          const playTone = async (frequency) => {
            if (!audioContext) return;
            
            if (audioContext.state === 'suspended') {
              await audioContext.resume();
            }
            
            stopTone();
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.1);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.start();
            
            oscillatorRef.current = oscillator;
            gainNodeRef.current = gainNode;
            setCurrentTone(frequency);
            setIsPlaying(true);
          };

          const stopTone = () => {
            if (oscillatorRef.current) {
              gainNodeRef.current.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.1);
              oscillatorRef.current.stop(audioContext.currentTime + 0.1);
              oscillatorRef.current = null;
              gainNodeRef.current = null;
            }
            setCurrentTone(null);
            setIsPlaying(false);
          };

          const startSession = (minutes) => {
            setSessionTime(minutes);
            setTimeRemaining(minutes * 60);
            setSessionActive(true);
            setCurrentIndex(0);
            
            sessionIntervalRef.current = setInterval(() => {
              setTimeRemaining(prev => {
                if (prev <= 1) {
                  endSession();
                  return 0;
                }
                return prev - 1;
              });
            }, 1000);
            
            playSessionSequence(0, minutes * 60);
          };

          const playSessionSequence = (index, totalTime) => {
            if (!sessionActive || index >= frequencies.length) {
              setCurrentIndex(0);
              playSessionSequence(0, totalTime);
              return;
            }
            
            const timePerFreq = Math.floor(totalTime / frequencies.length);
            setCurrentIndex(index);
            setSelectedFreq(frequencies[index]);
            playTone(frequencies[index].freq);
            
            frequencyTimeoutRef.current = setTimeout(() => {
              if (sessionActive) {
                playSessionSequence(index + 1, totalTime);
              }
            }, timePerFreq * 1000);
          };

          const endSession = () => {
            setSessionActive(false);
            setTimeRemaining(0);
            if (sessionIntervalRef.current) {
              clearInterval(sessionIntervalRef.current);
            }
            if (frequencyTimeoutRef.current) {
              clearTimeout(frequencyTimeoutRef.current);
            }
            stopTone();
          };

          const playIndividual = (freqObj, duration) => {
            setSelectedFreq(freqObj);
            playTone(freqObj.freq);
            
            if (individualTimeoutRef.current) {
              clearTimeout(individualTimeoutRef.current);
            }
            
            individualTimeoutRef.current = setTimeout(() => {
              stopTone();
            }, duration * 60 * 1000);
          };

          const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
          };

          const groupedFrequencies = frequencies.reduce((acc, freq) => {
            if (!acc[freq.category]) acc[freq.category] = [];
            acc[freq.category].push(freq);
            return acc;
          }, {});

          return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white' },
            // Header
            React.createElement('div', { className: 'bg-black/20 backdrop-blur-lg border-b border-white/20 p-4' },
              React.createElement('div', { className: 'flex items-center justify-between' },
                React.createElement('h1', { className: 'text-xl font-bold flex items-center gap-2' },
                  React.createElement(Heart, { className: 'text-pink-400', size: 24 }),
                  'Healing Vibrations'
                ),
                sessionActive && React.createElement('div', { className: 'text-right' },
                  React.createElement('div', { className: 'text-sm text-white/80' }, 'Session Time'),
                  React.createElement('div', { className: 'text-lg font-bold' }, formatTime(timeRemaining))
                )
              )
            ),

            // Content
            React.createElement('div', { className: 'pb-20' },
              currentView === 'home' && React.createElement('div', { className: 'p-4 space-y-6' },
                // Session Controls
                React.createElement('div', { className: 'bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20' },
                  React.createElement('h2', { className: 'text-xl font-bold mb-4 flex items-center gap-2' },
                    React.createElement(Timer, { className: 'text-blue-400' }),
                    'Timed Sessions'
                  ),
                  
                  sessionActive ? React.createElement('div', { className: 'text-center space-y-4' },
                    React.createElement('div', { className: 'text-2xl font-bold' }, formatTime(timeRemaining)),
                    React.createElement('div', { className: 'text-sm text-white/80' },
                      `Playing: ${frequencies[currentIndex]?.name} (${currentIndex + 1}/40)`
                    ),
                    React.createElement('div', { className: 'w-full bg-white/20 rounded-full h-2' },
                      React.createElement('div', { 
                        className: 'bg-gradient-to-r from-pink-400 to-purple-400 h-2 rounded-full transition-all',
                        style: { width: `${((sessionTime * 60 - timeRemaining) / (sessionTime * 60)) * 100}%` }
                      })
                    ),
                    React.createElement('button', { 
                      onClick: endSession,
                      className: 'w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2'
                    },
                      React.createElement(Square, { size: 20 }),
                      'End Session'
                    )
                  ) : React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                    [15, 30, 45, 60].map(minutes =>
                      React.createElement('button', {
                        key: minutes,
                        onClick: () => startSession(minutes),
                        className: 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-xl font-semibold transition-all'
                      }, `${minutes} min`)
                    )
                  )
                ),

                // Quick Access
                React.createElement('div', { className: 'bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20' },
                  React.createElement('h2', { className: 'text-xl font-bold mb-4 flex items-center gap-2' },
                    React.createElement(Zap, { className: 'text-yellow-400' }),
                    'Quick Access'
                  ),
                  React.createElement('div', { className: 'grid grid-cols-1 gap-3' },
                    React.createElement('button', {
                      onClick: () => setCurrentView('solfeggio'),
                      className: 'bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-3 rounded-xl font-semibold'
                    }, 'Core Solfeggio (9 tones)'),
                    React.createElement('button', {
                      onClick: () => setCurrentView('chakras'),
                      className: 'bg-gradient-to-r from-red-500 to-purple-500 hover:from-red-600 hover:to-purple-600 text-white py-3 rounded-xl font-semibold'
                    }, 'All Chakras (28 tones)'),
                    React.createElement('button', {
                      onClick: () => setCurrentView('all'),
                      className: 'bg-gradient-to-r from-indigo-500 to-pink-500 hover:from-indigo-600 hover:to-pink-600 text-white py-3 rounded-xl font-semibold'
                    }, 'All 40 Frequencies')
                  )
                ),

                // Current Playing
                selectedFreq && React.createElement('div', { className: 'bg-white/15 backdrop-blur-lg rounded-2xl p-6 border border-white/30 text-center' },
                  React.createElement('div', { className: 'text-lg font-bold mb-2' }, selectedFreq.name),
                  React.createElement('div', { className: 'text-blue-200 mb-2' }, `${selectedFreq.freq} Hz`),
                  React.createElement('div', { className: 'text-white/80 text-sm' }, selectedFreq.description),
                  React.createElement('div', { 
                    className: 'w-8 h-8 rounded-full mx-auto mt-3',
                    style: { backgroundColor: selectedFreq.color }
                  }),
                  React.createElement('button', {
                    onClick: stopTone,
                    className: 'mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-6 rounded-xl font-semibold'
                  }, 'Stop')
                )
              ),

              // Individual Frequency Views
              (currentView === 'solfeggio' || currentView === 'chakras' || currentView === 'all') && React.createElement('div', { className: 'p-4 space-y-4' },
                React.createElement('div', { className: 'flex items-center justify-between mb-4' },
                  React.createElement('button', {
                    onClick: () => setCurrentView('home'),
                    className: 'text-white/80 hover:text-white flex items-center gap-2'
                  }, '← Back'),
                  React.createElement('div', { className: 'flex items-center gap-2 text-sm' },
                    React.createElement(Clock, { size: 16 }),
                    React.createElement('select', {
                      value: individualDuration,
                      onChange: (e) => setIndividualDuration(Number(e.target.value)),
                      className: 'bg-white/20 border border-white/30 rounded px-2 py-1 text-white text-sm'
                    },
                      [1,2,3,4,5,6,7,8,9,10].map(min =>
                        React.createElement('option', { key: min, value: min }, `${min} min`)
                      )
                    )
                  )
                ),

                Object.entries(groupedFrequencies)
                  .filter(([category]) => {
                    if (currentView === 'solfeggio') return category === 'Solfeggio';
                    if (currentView === 'chakras') return category.includes('Chakra');
                    return true;
                  })
                  .map(([category, freqs]) =>
                    React.createElement('div', { 
                      key: category, 
                      className: 'bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20' 
                    },
                      React.createElement('h3', { className: 'text-lg font-bold mb-3' }, category),
                      React.createElement('div', { className: 'space-y-2' },
                        freqs.map((freqObj, index) =>
                          React.createElement('button', {
                            key: `${freqObj.freq}-${index}`,
                            onClick: () => playIndividual(freqObj, individualDuration),
                            className: `w-full p-3 rounded-xl border transition-all text-left ${
                              currentTone === freqObj.freq && isPlaying
                                ? 'border-white bg-white/20'
                                : 'border-white/30 bg-white/5 hover:bg-white/15'
                            }`
                          },
                            React.createElement('div', { className: 'flex items-center gap-3' },
                              React.createElement('div', { 
                                className: 'w-4 h-4 rounded-full flex-shrink-0',
                                style: { backgroundColor: freqObj.color }
                              }),
                              React.createElement('div', { className: 'flex-grow min-w-0' },
                                React.createElement('div', { className: 'font-semibold text-sm' }, freqObj.name),
                                React.createElement('div', { className: 'text-blue-200 text-xs' }, `${freqObj.freq} Hz`)
                              ),
                              currentTone === freqObj.freq && isPlaying && React.createElement('div', { className: 'flex-shrink-0' },
                                React.createElement('div', { className: 'w-2 h-2 bg-green-400 rounded-full animate-pulse' })
                              )
                            )
                          )
                        )
                      )
                    )
                  )
              )
            ),

            // Bottom Navigation
            React.createElement('div', { className: 'fixed bottom-0 left-0 right-0 bg-black/40 backdrop-blur-lg border-t border-white/20' },
              React.createElement('div', { className: 'flex items-center justify-around py-3' },
                React.createElement('button', {
                  onClick: () => setCurrentView('home'),
                  className: `flex flex-col items-center gap-1 p-2 ${currentView === 'home' ? 'text-white' : 'text-white/60'}`
                },
                  React.createElement(Home, { size: 20 }),
                  React.createElement('span', { className: 'text-xs' }, 'Home')
                ),
                React.createElement('button', {
                  onClick: () => setCurrentView('all'),
                  className: `flex flex-col items-center gap-1 p-2 ${currentView === 'all' ? 'text-white' : 'text-white/60'}`
                },
                  React.createElement(List, { size: 20 }),
                  React.createElement('span', { className: 'text-xs' }, 'Browse')
                ),
                React.createElement('button', {
                  onClick: stopTone,
                  className: 'flex flex-col items-center gap-1 p-2 text-white/60 hover:text-white'
                },
                  React.createElement(Square, { size: 20 }),
                  React.createElement('span', { className: 'text-xs' }, 'Stop')
                )
              )
            )
          );
        };

        ReactDOM.render(React.createElement(HealingVibrationsApp), document.getElementById('root'));
    </script>
</body>
</html>
